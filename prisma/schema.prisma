generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model User {
  id              Int         @id @default(autoincrement()) @db.UnsignedInt
  userId          String      @unique(map: "users_userid_unique") 
  platform        Platform
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  alts            Alt[]
}

model Alt {
  id             Int         @id @default(autoincrement()) @db.UnsignedInt
  altPlatfrom    Platform
  altId          String      @unique
  userId         String        
  user           User        @relation(fields: [userId], references: [userId])

  @@map("alts")
}

model Mod {
  id            Int          @id @default(autoincrement()) @db.UnsignedInt
  userDiscordId String       @unique
  userId        String       
  createdAt     DateTime     @default(now())
  isVerified    Boolean      @default(true)
  modType       Platform

  @@map("mods")
}

model Streamer {
  id           Int           @id @default(autoincrement()) @db.UnsignedInt
  userId       String        @unique
  lastOnline   DateTime      
  streamType   Platform
  createdAt    DateTime       @default(now())

  @@map("streamers")
}

model Ban {
  id           Int           @id @default(autoincrement()) @db.UnsignedInt
  bannedAt     DateTime      @default(now())
  updatedAt    DateTime?     @updatedAt
  banPlatform  Platform
  userId       String        
  isBanned     Boolean       @default(true)
  streamerId   String        
  moderatorId  String        
  reason       String        
  evidence     String?       

  @@map("bans")
}

enum Platform {
  twitch
  facebook
  youtube
  discord
}